# MAC Tracer (MAC Finder)
–°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ MAC-–∞–¥—Ä–µ—Å–∞ –ø–æ —Å–µ—Ç–∏ Cisco ‚Äî –æ—Ç —è–¥—Ä–∞ –¥–æ –∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞ –¥–æ—Å—Ç—É–ø–∞.  
–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, **–Ω–∞ –∫–∞–∫–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏ –Ω–∞ –∫–∞–∫–æ–º —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º –ø–æ—Ä—Ç—É –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏—Å–∫–æ–º—ã–π MAC**, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥—è –º–µ–∂–¥—É –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º MAC-—Ç–∞–±–ª–∏—Ü—ã, LLDP/CDP –∏ ARP.

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω–∂–µ–Ω–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å:
> ¬´–ì–¥–µ, —á—ë—Ä—Ç –≤–æ–∑—å–º–∏, –≤–æ—Ç–∫–Ω—É—Ç —ç—Ç–æ—Ç MAC?¬ª  
---
## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ü–æ–∏—Å–∫ MAC-–∞–¥—Ä–µ—Å–∞, –Ω–∞—á–∏–Ω–∞—è —Å –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **Port-Channel (EtherChannel)** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞–∑–±–æ—Ä–æ–º —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ø–æ—Ä—Ç–æ–≤
- –ü–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ —á–µ—Ä–µ–∑:
  - **LLDP** (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ)
  - **CDP**
  - **ARP** (fallback, last resort)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è (visited-set)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ **–∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞**, –≥–¥–µ MAC —Ä–µ–∞–ª—å–Ω–æ –ø–æ–¥–∫–ª—é—á—ë–Ω
- –ü–æ–¥—Ä–æ–±–Ω—ã–π CLI-–ª–æ–≥ + —Ñ–∞–π–ª –ª–æ–≥–æ–≤
---
## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **Cisco CLI (IOS / IOS-XE)**
- SSH-–¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ç–µ–≤—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º
- Python **3.8+**
### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- `paramiko`
- —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–æ–¥—É–ª–∏ Python (`re`, `json`, `logging`, `getpass`)
–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
```bash
pip install -r requirements.txt
```
## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- **Access ‚Üî Distribution ‚Üî Core**
- **Port-Channel –º–µ–∂–¥—É –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞–º–∏**
- **LLDP / CDP** —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∫–æ–Ω–µ—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- –°–∏—Ç—É–∞—Ü–∏–∏, –≥–¥–µ **LLDP / CDP –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** (fallback —á–µ—Ä–µ–∑ ARP)
---
## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç
### 1. –°—Ç–∞—Ä—Ç
–°–∫—Ä–∏–ø—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å **–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞**, —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
---
### 2. –ü–æ–∏—Å–∫ MAC
–ù–∞ –∫–∞–∂–¥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞:
```text
show mac address-table | include <MAC>
```
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è:
–ø–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞–π–¥–µ–Ω MAC
—è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ—Ä—Ç Port-Channel
### 3. Port-Channel (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
–ï—Å–ª–∏ MAC –Ω–∞–π–¥–µ–Ω –Ω–∞ PoX, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:
```text
show etherchannel summary
```
–ò–∑–≤–ª–µ–∫–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ (P) —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –≤—Ö–æ–¥—è—â–∏–µ –≤ Port-Channel.
### 4. –ü–æ–∏—Å–∫ —Å–æ—Å–µ–¥–∞ (–≤ —Å—Ç—Ä–æ–≥–æ–º –ø–æ—Ä—è–¥–∫–µ)
LLDP
```text
show lldp neighbors <interface> detail
```
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è Chassis ID
–ï—Å–ª–∏ Chassis ID == target MAC ‚Äî —ç—Ç–æ –∫–æ–Ω–µ—á–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –ø–µ—Ä–µ—Ö–æ–¥ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è

CDP
```text
show cdp neighbors <interface> detail
```
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–Ω–µ—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤.

ARP (fallback)
```text
show ip arp | include <MAC>
```
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ LLDP/CDP –Ω–µ –¥–∞–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

### 5. –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥
–ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω IP —Å–æ—Å–µ–¥–∞ ‚Äî —Å–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä
–ï—Å–ª–∏ IP –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî –ø–æ—Ä—Ç —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–æ–Ω–µ—á–Ω—ã–º üéØ

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```text
config.json
{
  "start_switch": "192.168.147.2",
  "target_mac": "000a.830b.b747"
}
```
start_switch ‚Äî IP –∫–æ–º–º—É—Ç–∞—Ç–æ—Ä–∞, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–æ–∏—Å–∫
target_mac ‚Äî MAC-–∞–¥—Ä–µ—Å –≤ —Ñ–æ—Ä–º–∞—Ç–µ Cisco (xxxx.xxxx.xxxx)
```text
cred.json
{
  "username": "admin"
}
```
–ü–∞—Ä–æ–ª—å –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ
–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω –ª–æ–≥–∏–Ω –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## –ó–∞–ø—É—Å–∫
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: pip install -r requirements.txt.
–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç: python main.py.
–ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞:

(venv) PS D:\...\mac_finder> python.exe main.py
–±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—à–µ–Ω –ø–∞—Ä–æ–ª—å
—Å–∫—Ä–∏–ø—Ç –Ω–∞—á–Ω—ë—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—É—é —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É MAC

–§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```text
üéØ –ù–∞–π–¥–µ–Ω –∫–æ–Ω–µ—á–Ω—ã–π –ø–æ—Ä—Ç –Ω–∞ SW-ACCESS-03: Gi1/0/24
```

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª:
```text
mac_finder.log
```
